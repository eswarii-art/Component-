<!DOCTYPE html>
<html>
<head>
<title>PicPopðŸ“¸</title>

<!-- IMPORTANT FOR MOBILE -->
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<link href="https://fonts.googleapis.com/css2?family=Rubik:wght@400;600&family=Pacifico&display=swap" rel="stylesheet">

<style>
*{
  box-sizing:border-box;
}

body {
  margin: 0;
  font-family: 'Rubik', sans-serif;
  background: linear-gradient(135deg,#ff9a9e,#fad0c4,#fbc2eb);
  color: #333;
  min-height:100vh;
}

/* Splash */
#splash{
  position:fixed;
  inset:0;
  background:linear-gradient(135deg,#ff4d6d,#845ec2);
  display:flex;
  align-items:center;
  justify-content:center;
  flex-direction:column;
  color:white;
  z-index:10;
}
#splash h1{
  font-family:Pacifico;
  font-size:3rem;
}

/* Nav */
nav {
  display: flex;
  justify-content: space-around;
  background: white;
  padding: 10px;
  border-radius: 0 0 20px 20px;
  position:sticky;
  top:0;
}

nav button {
  background: linear-gradient(135deg,#ff4d6d,#845ec2);
  color: white;
  border: none;
  font-size: 14px;
  padding:8px 16px;
  border-radius: 20px;
}

/* Sections */
section {
  display: none;
  padding: 15px;
  text-align:center;
  min-height:80vh;
}
.active { display: block; }

/* Canvas responsive */
canvas {
  width: 100%;
  max-width: 100%;
  height: auto;
  background: white;
  border-radius: 15px;
  box-shadow:0 10px 25px rgba(0,0,0,.2);
  margin-top:10px;
}

/* Inputs */
input[type="file"],
input[type="text"]{
  width:100%;
  max-width:350px;
  padding:10px;
  border-radius:15px;
  border:none;
  margin:6px 0;
}

/* Buttons */
.action{
  background:linear-gradient(135deg,#ff4d6d,#845ec2);
  color:white;
  border:none;
  border-radius:20px;
  padding:10px 18px;
  margin:6px;
  width:100%;
  max-width:250px;
}

.filter-btn{
  background:#ffd166;
  border:none;
  border-radius:15px;
  margin:4px;
  padding:8px 12px;
  width:45%;
}

/* Filter grid */
#filter .filter-btn{
  display:inline-block;
}

/* Gallery */
.gallery{
  display:grid;
  grid-template-columns: repeat(3, 1fr);
  gap:10px;
}
.gallery img {
  width: 100%;
  aspect-ratio:1/1;
  object-fit: cover;
  border-radius: 12px;
}

/* Mobile fine tuning */
@media(max-width:600px){
  #splash h1{ font-size:2.5rem; }
  nav button{ font-size:13px; padding:6px 12px; }
  .filter-btn{ width:48%; }
}
</style>
</head>

<body>

<!-- Splash Logo -->
<div id="splash">
  <h1>PicPop</h1>
  <p>Pop your photos âœ¨</p>
</div>

<nav>
  <button onclick="show('editor')">Editor</button>
  <button onclick="show('filter')">Filter</button>
  <button onclick="show('gallery')">Gallery</button>
</nav>

<!-- EDITOR -->
<section id="editor" class="active">
  <h2>PicPop Editor</h2>
  <input type="file" id="upload">
  <canvas id="canvas"></canvas>
  <input type="text" id="text" placeholder="Add text ðŸ’˜">
  <button class="action" onclick="drawText()">Add</button>
</section>

<!-- FILTER -->
<section id="filter">
  <h2>Cute Filters âœ¨</h2>
  <canvas id="filterCanvas"></canvas>
  <br>

  <button class="filter-btn" onclick="setFilter('none')">Clean</button>
  <button class="filter-btn" onclick="setFilter('brightness(110%) saturate(120%)')">Bright</button>
  <button class="filter-btn" onclick="setFilter('contrast(105%) brightness(115%)')">Glow</button>
  <button class="filter-btn" onclick="setFilter('saturate(140%) hue-rotate(340deg)')">Pink</button>
  <button class="filter-btn" onclick="setFilter('brightness(105%) saturate(110%) blur(0.5px)')">Pastel</button>
  <button class="filter-btn" onclick="setFilter('brightness(110%) hue-rotate(20deg)')">Warm</button>
  <button class="filter-btn" onclick="setFilter('brightness(105%) hue-rotate(200deg)')">Cool</button>
  <button class="filter-btn" onclick="setFilter('contrast(110%) saturate(90%)')">Vintage</button>
  <button class="filter-btn" onclick="setFilter('brightness(95%) contrast(120%)')">Moody</button>
  <button class="filter-btn" onclick="setFilter('contrast(90%) brightness(105%)')">Matte</button>

  <br><br>
  <button class="action" onclick="saveToGallery()">Save to Gallery ðŸ“¥</button>
</section>

<!-- GALLERY -->
<section id="gallery">
  <h2>Your Gallery</h2>
  <div class="gallery" id="galleryBox"></div>
</section>

<script>
/* Splash */
setTimeout(()=> splash.style.display="none",2000);

/* Navigation */
function show(id){
  document.querySelectorAll("section").forEach(s=>s.classList.remove("active"));
  document.getElementById(id).classList.add("active");
}

/* Main Image */
let canvas = document.getElementById("canvas");
let ctx = canvas.getContext("2d");
let filterCanvas = document.getElementById("filterCanvas");
let fctx = filterCanvas.getContext("2d");
let img = new Image();
let currentFilter="none";
let gallery=[];

/* Upload once */
upload.onchange = e => {
  let r = new FileReader();
  r.onload = ()=> img.src = r.result;
  r.readAsDataURL(e.target.files[0]);
}

/* Image load */
img.onload = ()=>{
  canvas.width = img.naturalWidth;
  canvas.height = img.naturalHeight;
  filterCanvas.width = img.naturalWidth;
  filterCanvas.height = img.naturalHeight;

  ctx.drawImage(img,0,0);
  redraw();
}

/* Editor text */
function drawText(){
  ctx.drawImage(img,0,0);
  ctx.font = "40px Pacifico";
  ctx.fillStyle = "white";
  ctx.textAlign="center";
  ctx.fillText(text.value,canvas.width/2,canvas.height-40);

  ctx.font = "14px Rubik";
  ctx.fillStyle = "rgba(0,0,0,0.4)";
  ctx.textAlign = "right";
  ctx.fillText("Made by Eswari", canvas.width-10, canvas.height-10);

  redraw();
}

/* Filters */
function setFilter(f){
  currentFilter=f;
  redraw();
}

function redraw(){
  fctx.filter=currentFilter;
  fctx.drawImage(canvas,0,0);
  fctx.filter="none";

  fctx.font = "14px Rubik";
  fctx.fillStyle = "rgba(0,0,0,0.4)";
  fctx.textAlign = "right";
  fctx.fillText("Made by Eswari", filterCanvas.width-10, filterCanvas.height-10);
}

/* Save */
function saveToGallery(){
  gallery.push(filterCanvas.toDataURL());
  renderGallery();
  alert("Saved ðŸ©µ");
}

/* Gallery */
function renderGallery(){
  galleryBox.innerHTML="";
  gallery.forEach(src=>{
    let im = document.createElement("img");
    im.src = src;
    galleryBox.appendChild(im);
  });
}
</script>

</body>
</html>
